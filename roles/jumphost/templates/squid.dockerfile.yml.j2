FROM ubuntu:22.04

# Install Squid
RUN apt-get update && \
    apt-get install -y squid && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

# Copy Squid config into place
COPY squid.conf /etc/squid/squid.conf

# Expose default Squid port
EXPOSE 3128

# Run Squid in foreground using custom config
ENTRYPOINT ["squid", "-N", "-f", "/etc/squid/squid.conf"]
